# Sentiment Analysis REST API with FastAPI & Docker

This project builds, trains, and deploys a sentiment analysis model on the IMDb dataset using FastAPI and Docker. It exposes a REST API for making predictions and is ready for integration into CI/CD workflows and cloud deployments.

## Features 
- Uses IMDb movie review dataset
- Preprocessing with NLTK and scikit-learn
- Logistic Regression + TfidfVectorizer
- Exposed via a FastAPI REST API
- Containerized using Docker
- Production-ready structure for MLOps

## Project Structure 
```
sentiment-service/
├── app/
│   ├── main.py                # FastAPI server with /predict endpoint
│   ├── model.py               # Load serialized model
├── train/
│   └── train_model.py         # Model training, preprocessing, MLflow logging
├── tests/
│   └── test_api.py            # Unit tests for the API
├── Dockerfile                 # Container build definition
├── requirements.txt           # Project dependencies
├── .github/
│   └── workflows/
│       └── ci-cd.yml          # GitHub Actions pipeline
├── mlruns/                    # Auto-generated by MLflow
└── README.md
```

## Dataset
- Source: IMDb Large Movie Review Dataset
- Accessed via: HuggingFace datasets library
- Size: 25,000 labeled movie reviews for training

## Installation 
#### Clone the repo 
```
git clone https://github.com/rajatvajpayee/Sentiment-Analysis-Web-Service.git
cd Sentiment-Analysis-Web-Service
```

#### Install Python Dependencies 
```
pip install -r requirements.txt
```

## Train the Model 
The model is trained using a Logistic Regression classifier on TF-IDF features. Preprocessing includes token cleaning, punctuation removal, and stop word filtering.
To train - 
```
python train/train_model.py
```

This will:
- Download the IMDb dataset
- Preprocess text
- Train the model
- Save the model to app/sentiment_model.joblib

## Running the API Locally

### Start with Uvicorn (Dev Mode)
```
uvicorn app.main:app --reload
```

### Test the Endpoint
**Swagger UI** : http://127.0.0.1:8000/docs

**Sample Request** :  
```
curl -X POST http://127.0.0.1:8000/predict \
     -H "Content-Type: application/json" \
     -d '{"text": "The movie was excellent!"}'
```

**Response** : 
```
{"prediction": "positive"}
```

## Docker Deployment
```
## Build the image
docker build -t sentiment-service . 

## Run the container
docker run -p 8000:8000 sentiment-service

## Access the API 
curl -X POST http://localhost:8000/predict \
     -H "Content-Type: application/json" \
     -d '{"text": "This was a terrible experience"}'

```

## API Reference

**Request Body** :
```
{
  "text": "string"
}
```

**Response** :
```
{
  "prediction": "positive" | "negative"
}
```

## Requirements
- Python 3.8+
- fastapi, scikit-learn, joblib, nltk, datasets, uvicorn

```
pip install -r requirements.txt
```

## Future Improvements 
- Add confidence score in predictions
- Support batch predictions
- Integrate MLflow for tracking
- Store models in S3 or GCS